---
title : "Enable post-scan actions"
date :  "`r Sys.Date()`" 
weight : 2
chapter : false
pre : " <b> 3.2 </b> "
---

### Tổng quan

Phần này chúng ta sẽ tiến hành cấu hình lambda function sao cho sau khi quá trình scan diễn ra, Lambda Function sẽ đặt các file sạch vào **Production Bucket** và các file độc hại vào **Quarantine Bucket**.

### Yêu cầu

1. Các bạn phải note lại tên 2 bucket đã tạo để làm **Production Bucket** và **Quarantine Bucket**. Trong trường hợp của mình là:
- **Production Bucket** để nhận file sạch. `aws-fcj-production-bucket`
- **Quarantine Bucket** để nhận các file độc hại. `aws-fcj-quarantine-bucket`

2. Ngoài ra cũng cần note lại ARN của SNS Topic trong CloudFormation stack
- Ở màn hình AWS Console -> search và chọn **CloudFormation** -> chọn all-in-one stack mình đã tạo ở bước trước -> tab **Outputs** -> Tìm **ScanResultTopicARN** và copy nó

### Cài đặt

1. Truy cập trang application của Lambda với link [tại đây](https://console.aws.amazon.com/lambda/home?#/create/app?applicationId=arn:aws:serverlessrepo:us-east-1:415485722356:applications/cloudone-filestorage-plugin-action-promote-or-quarantine)
2. Điền các giá trị
- **ScanningBucketName**: s3 bucket được quét bởi Trend Micro, ở đây là **Staging Bucket** của mình đã tạo ở bước trước. `aws-fcj-staging-bucket`
- **PromoteBucketName**: s3 bucket để nhận các file sạch đã được note ở trên. `aws-fcj-quarantine-bucket`
- **QuarantineBucketName**: s3 bucket để nhận file độc hại đã được note ở trên. `aws-fcj-quarantine-bucket`
- **ScanResultTopicARN**: ARN của SNS Topic trong stack đã được note ở trên.

![Enable](/images/3.malware-scanning-solution/011-enable-post-scan.png)

3. Check vào ô **I acknowledge that this app creates custom IAM roles** và click button **Deploy**

![Deploy](/images/3.malware-scanning-solution/012-deploy-post-scan.png)
