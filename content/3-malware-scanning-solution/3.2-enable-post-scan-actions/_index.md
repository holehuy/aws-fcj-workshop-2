---
title : "Enable post-scan actions"
date : "`r Sys.Date()`"
weight : 2
chapter : false
pre : " <b> 3.2 </b> "
---

### Overal

In this part, we will configure the lambda function so that after the scanning process takes place, the Lambda Function will place clean files into the **Production Bucket** and malicious files into the **Quarantine Bucket**.

### Prerequiste

1. You must note down the names of the 2 buckets created to make **Production Bucket** and **Quarantine Bucket**. In my case it is:
- **Production Bucket** to receive clean files. `aws-fcj-production-bucket`
- **Quarantine Bucket** to receive malicious files. `aws-fcj-quarantine-bucket`

2. In addition, you also need to note the ARN of the SNS Topic in the CloudFormation stack
- On the AWS Console screen -> search and select **CloudFormation** -> select the all-in-one stack you created in the previous step -> **Outputs** tab -> Find **ScanResultTopicARN** and copy it

### Installation

1. Visit Lambda's application page with the link [here](https://console.aws.amazon.com/lambda/home?#/create/app?applicationId=arn:aws:serverlessrepo:us-east-1:415485722356:applications/cloudone-filestorage-plugin-action-promote-or-quarantine)
2. Fill in the values
- **ScanningBucketName**: s3 bucket was scanned by Trend Micro, here is my **Staging Bucket** created in the previous step. `aws-fcj-staging-bucket`
- **PromoteBucketName**: s3 bucket to receive clean files as noted above. `aws-fcj-quarantine-bucket`
- **QuarantineBucketName**: s3 bucket to receive malicious files as noted above. `aws-fcj-quarantine-bucket`
- **ScanResultTopicARN**: ARN of SNS Topic in the stack noted above.

![Enable](/images/3.malware-scanning-solution/011-enable-post-scan.png)

3. Check the **I acknowledge that this app creates custom IAM roles** box and click the **Deploy** button

![Deploy](/images/3.malware-scanning-solution/012-deploy-post-scan.png)
